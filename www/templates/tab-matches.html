<ion-view view-title="Matches">
    <ion-content class="padding">
        <ion-refresher pulling-text="Pull to refresh" on-refresh="doRefresh()">
        </ion-refresher>
        <div class="container"><div class="col-md-12">
        <nav id="nav-select">
            <ul class="nav nav-pills nav-pills-custom nav-justified">
                <li ng-class="view=='upcoming' ? 'active' : ''"><a data-toggle="tab" ng-click="setView('upcoming')">Upcoming</a></li>
                <li ng-class="view=='current' ? 'active' : ''"><a data-toggle="tab" ng-click="setView('current')">Current</a></li>
                <li ng-class="view=='finished' ? 'active' : ''"><a data-toggle="tab" ng-click="setView('finished')">Finished</a></li>
            </ul>
        </nav>

        <!-- Tab panes -->
        <div class="tab-content">
            <div class="tab-pane" id="upcoming-matches" ng-class="view=='upcoming' ? 'active' : ''">
                <h2 class="table-title">
                    Upcoming matches
                </h2>

                <table id="upcoming-matches-table" class="table team-table">
                    <tbody>
                    <tr ng-repeat="match in upcomingMatches">
                        <td class="discipline">
                            {{ match.discipline }}
                        </td>
                        <td class="localId">
                            {{ match.localId }}
                        </td>
                        <td class="team team1 text-right">
                            <span class="player" ng-repeat="player in match.team1.players">{{player.name}}</span>
                        </td>
                        <td class="team team2">
                            <span class="player" ng-repeat="player in match.team2.players">{{player.name}}</span>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div class="tab-pane" id="current-matches" ng-class="view=='current' ? 'active' : ''">
                <h2 class="table-title">
                    Current matches
                </h2>
                <table id="current-matches-table" class="table team-table">
                    <tbody>
                    <tr ng-repeat="match in currentMatches">
                        <td class="match-playing status" ng-class="match.locationOnHold ? 'postponed' : ''">
                            <!--         <span class="sub">court</span> -->
                            <strong>{{ match.location }}</strong>
                        </td>
                        <td class="discipline">
                            {{ match.discipline }}
                        </td>
                        <td class="localId">
                            {{ match.localId }}
                        </td>
                        <td class="team team1 text-right">
                            <span class="player" ng-repeat="player in match.team1Players">{{player}}</span>
                        </td>
                        <td class="team team2">
                            <span class="player" ng-repeat="player in match.team2Players">{{player}}</span>
                        </td>
                        <td class="actions">
                            <button class="button button-balanced" ng-click="openScoreModal()">
                                Enter score
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div class="tab-pane" id="finished-matches" ng-class="view=='finished' ? 'active' : ''">
                <h2 class="table-title">
                    Finished matches
                </h2>
                <table id="finished-matches-table" class="table team-table">
                    <tbody>
                    <tr ng-repeat="match in finishedMatches">
                        <td class="discipline">
                            {{ match.discipline }}
                        </td>
                        <td class="localId">
                            {{ match.localId }}
                        </td>
                        <td class="team team1 text-right">
                            <span class="player" ng-repeat="player in match.team1.players">{{player.name}}</span>
                        </td>
                        <td class="team team2">
                            <span class="player" ng-repeat="player in match.team2.players">{{player.name}}</span>
                        </td>
                        <td class="score">
                            <span class="set-score">{{ match.score }}</span>
                            <!--<span class="set-score">{{ match.score }}</span>-->
                        </td>
                    </tr>

                    <tr>
                        <td colspan="5" class="loadmore-row"><button class="loadmore btn btn-default btn-block" ng-click="loadMoreFinishedMatches()">Load more matches</button></td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div ng-include="'templates/loadingPane.html'" ng-if="isLoading"></div>
        </div><!-- /.tab-content -->
        </div></div>
    </ion-content>
</ion-view>

<script id="score-modal.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar>
            <h1 class="title">Match scoring</h1>
            <button class="button button-clear pull-right" ng-click="closeModal()">
                Ã—
            </button>
        </ion-header-bar>
        <ion-content>
            <table class="table">
                <tbody>
                <tr>
                    <th>Match <span class="modalLocalId"></span></th>
                    <th><span class="modalRound"></span></th>
                    <th><span class="modalDiscipline"></span></th>
                </tr>
                <tr>
                    <td><span class="modalTeam1"></span></td>
                    <td>vs</td>
                    <td><span class="modalTeam2"></span></td>
                </tr>
                </tbody>
            </table>
            <div class="input-group" style="width:200px">
                <div class="input-group-addon">Set xx</div>
                <input type="text" class="form-control" placeholder="__" size="8" maxlength="2">
                <div class="input-group-addon"> - </div>
                <input type="text" class="form-control" placeholder="__" size="8" maxlength="2">
            </div>

            <input type="hidden" class="modalMatchId" value="" />
        </ion-content>
        <ion-footer-bar>
            <div class="buttons pull-right">
                <button class="button pull-right" ng-click="closeModal()">
                    Cancel
                </button> &nbsp;
                <button class="button button-positive pull-right icon-left ion-edit">
                    Save
                </button>
            </div>
        </ion-footer-bar>
    </ion-modal-view>
</script>